{"version":3,"file":"static/js/871.113e9283.chunk.js","mappings":"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","sources":["components/Rating/Rating.jsx","components/Review/Review.jsx","components/Reviews/Reviews.jsx","functions.js"],"sourcesContent":["import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport \"./Rating.css\";\n\nconst Rating = ({ rating, number, needNumber }) => {\n  const getStar = (rating) => {\n    if (rating >= 1) {\n      return (\n        <img\n          src={process.env.PUBLIC_URL + \"/resources/images/star.png\"}\n          alt=\"one star\"\n        />\n      );\n    } else if (rating >= 0.5) {\n      return (\n        <img\n          src={process.env.PUBLIC_URL + \"/resources/images/half-star.png\"}\n          alt=\"half star\"\n        />\n      );\n    }\n    return (\n      <img\n        src={process.env.PUBLIC_URL + \"/resources/images/unfilled-star.png\"}\n        alt=\"no star\"\n      />\n    );\n  };\n\n  return (\n    <div className=\"rating\">\n      <div className=\"rating_stars\">\n        {getStar(rating)}\n        {getStar(rating - 1)}\n        {getStar(rating - 2)}\n        {getStar(rating - 3)}\n        {getStar(rating - 4)}\n      </div>\n      {needNumber && <div className=\"reviews_number\">{`${number}`}</div>}\n    </div>\n  );\n};\n\nRating.defaultProps = {\n  number: 1,\n  rating: 0,\n  needNumber: true,\n};\n\nRating.propTypes = {\n  rating: PropTypes.number,\n  number: PropTypes.number,\n  needNumber: PropTypes.bool,\n};\n\nexport default React.memo(Rating);\n","import PropTypes from \"prop-types\";\n\nimport Rating from \"../Rating/Rating\";\nimport \"./Review.css\";\n\nconst Review = ({ review }) => {\n  return (\n    <div className=\"review\">\n      <div className=\"review-info\">\n        <div className=\"review-author\">{review?.author && review.author}</div>\n        <Rating rating={review.rating} needNumber={false} />\n      </div>\n      <div className=\"review-title\">{review.title}</div>\n      {review.pros && (\n        <div className=\"pros\">\n          <div className=\"pros_title\">Pros</div>\n          <div className=\"pros_desc\">{review.pros}</div>\n        </div>\n      )}\n      {review.cons && (\n        <div className=\"cons\">\n          <div className=\"cons_title\">Cons</div>\n          <div className=\"cons_desc\">{review.cons}</div>\n        </div>\n      )}\n      {review.description && (\n        <div className=\"review-text\">\n          <div className=\"review-text_title\">Comment</div>\n          <div className=\"review-text_desc\">{review.description}</div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Review;\n\nReview.propTypes = {\n  review: PropTypes.objectOf(\n    PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n  ),\n};\n","import { Helmet, HelmetProvider } from \"react-helmet-async\";\nimport PropTypes from \"prop-types\";\nimport { useState } from \"react\";\nimport { useParams, Link, Navigate } from \"react-router-dom\";\n\nimport { sorted } from \"../../functions\";\nimport Review from \"../Review/Review\";\nimport Rating from \"../Rating/Rating\";\nimport \"./Reviews.css\";\n\nconst sorts = {\n  featured: (a, b) => 1,\n  byDate: (a, b) => {\n    if (a.date && b.date) {\n      let aDate = new Date(a.date),\n        bDate = new Date(b.date);\n      return aDate.getTime() - bDate.getTime();\n    } else if (a.date) {\n      return 1;\n    } else if (b.date) {\n      return -1;\n    } else {\n      return 0;\n    }\n  },\n  ascending: (a, b) => {\n    if (a.rating && b.rating) {\n      return a.rating - b.rating;\n    } else if (a.rating) {\n      return 1;\n    } else if (b.rating) {\n      return -1;\n    } else {\n      return 0;\n    }\n  },\n  descending: (a, b) => {\n    if (a.rating && b.rating) {\n      return b.rating - a.rating;\n    } else if (a.rating) {\n      return 1;\n    } else if (b.rating) {\n      return -1;\n    } else {\n      return 0;\n    }\n  },\n};\n\nconst Reviews = ({ goods }) => {\n  const params = useParams();\n\n  const [filters, setFilters] = useState({});\n  const [sorting, setSorting] = useState(\"featured\");\n\n  const product = goods[params.productId];\n\n  if (!product) {\n    return <Navigate to=\"/404\" />;\n  }\n\n  const fitFilters = (obj) => {\n    for (const [filterProp, value] of Object.entries(filters)) {\n      let pass = false;\n      if (value instanceof Array) {\n        if (obj.hasOwnProperty(filterProp)) {\n          if (value.length === 0) {\n            pass = true;\n          }\n          for (let e of value) {\n            if (obj[filterProp].toString() === e) {\n              pass = true;\n              break;\n            }\n          }\n        }\n      } else {\n        if (obj.hasOwnProperty(filterProp) && obj[filterProp] === value) {\n          pass = true;\n        }\n      }\n      if (!pass) {\n        return false;\n      }\n    }\n    return true;\n  };\n\n  const handleArrayInput = async (e, name) => {\n    const filtersCopy = await JSON.parse(JSON.stringify(filters));\n    if (filtersCopy.hasOwnProperty(name)) {\n      if (filtersCopy[name].includes(e.target.value)) {\n        filtersCopy[name] = filtersCopy[name].filter(\n          (el) => el !== e.target.value\n        );\n      } else {\n        filtersCopy[name] = filtersCopy[name].concat([e.target.value]);\n      }\n    } else {\n      filtersCopy[name] = [e.target.value];\n    }\n\n    setFilters(filtersCopy);\n  };\n\n  return (\n    <HelmetProvider>\n      <Helmet>\n        <title>{`Reviews for ${product.name} – devShop`}</title>\n      </Helmet>\n      <div className=\"reviews\">\n        <h1>\n          <Link to={`/shop/${params.productId}`}>{product.name}</Link> &ndash;\n          Reviews\n        </h1>\n\n        <div className=\"reviews_info_line\">\n          <h2>\n            {Object.keys(product.reviews).length === 1\n              ? `1 review`\n              : `${Object.keys(product.reviews).length} reviews`}\n          </h2>\n          <div className=\"reviews_tools\">\n            <select\n              name=\"reviewSorting\"\n              id=\"reviewSorting\"\n              value={sorting}\n              onChange={(e) => setSorting(e.target.value)}\n            >\n              <option value=\"featured\">Featured</option>\n              <option value=\"ascending\">By ascending rating</option>\n              <option value=\"descending\">By descending rating</option>\n              <option value=\"byDate\">Newest reviews</option>\n            </select>\n          </div>\n        </div>\n        <div className=\"reviews-filter\">\n          <ul className=\"list reviews-filter_list\">\n            <li className=\"list_item__rating\">\n              <label>\n                <input\n                  type=\"checkbox\"\n                  name=\"rating\"\n                  id=\"oneStar\"\n                  value={1}\n                  onChange={(e) => handleArrayInput(e, \"rating\")}\n                />\n                <Rating rating={1} needNumber={false} />\n              </label>\n            </li>\n            <li className=\"list_item__rating\">\n              <label>\n                <input\n                  type=\"checkbox\"\n                  name=\"rating\"\n                  id=\"twoStar\"\n                  value={2}\n                  onChange={(e) => handleArrayInput(e, \"rating\")}\n                />\n                <Rating rating={2} needNumber={false} />\n              </label>\n            </li>\n            <li className=\"list_item__rating\">\n              <label>\n                <input\n                  type=\"checkbox\"\n                  name=\"rating\"\n                  id=\"threeStar\"\n                  value={3}\n                  onChange={(e) => handleArrayInput(e, \"rating\")}\n                />\n                <Rating rating={3} needNumber={false} />\n              </label>\n            </li>\n            <li className=\"list_item__rating\">\n              <label>\n                <input\n                  type=\"checkbox\"\n                  name=\"rating\"\n                  id=\"fourStar\"\n                  value={4}\n                  onChange={(e) => handleArrayInput(e, \"rating\")}\n                />\n                <Rating rating={4} needNumber={false} />\n              </label>\n            </li>\n\n            <li className=\"list_item__rating\">\n              <label>\n                <input\n                  type=\"checkbox\"\n                  name=\"rating\"\n                  id=\"fiveStar\"\n                  value={5}\n                  onChange={(e) => handleArrayInput(e, \"rating\")}\n                />\n                <Rating rating={5} needNumber={false} />\n              </label>\n            </li>\n          </ul>\n        </div>\n        {/* TODO pagination */}\n        <ul className=\"reviews_list list\">\n          {sorted(\n            Object.entries(product.reviews)\n              .map((entry) => entry[1])\n              .filter((review) => fitFilters(review)),\n            sorts[sorting]\n          ).map((review) => (\n            <li key={review.id}>\n              <Review review={review} />\n            </li>\n          ))}\n        </ul>\n      </div>\n    </HelmetProvider>\n  );\n};\n\nexport default Reviews;\n\nReviews.propTypes = {\n  goods: PropTypes.objectOf(\n    PropTypes.objectOf(\n      PropTypes.oneOfType([\n        PropTypes.object,\n        PropTypes.string,\n        PropTypes.number,\n      ])\n    )\n  ),\n};\n","const merge = (a, b, comp) => {\n  let arr = [];\n  let i = 0,\n    j = 0;\n  while (i < a.length && j < b.length) {\n    if (comp(a[i], b[j]) >= 0) {\n      arr.push(a[i]);\n      i++;\n    } else {\n      arr.push(b[j]);\n      j++;\n    }\n  }\n  while (i < a.length) {\n    arr.push(a[i]);\n    i++;\n  }\n  while (j < b.length) {\n    arr.push(b[j]);\n    j++;\n  }\n  return arr;\n};\n\n// merge sort\nconst sorted = (arr, comp = () => 1) => {\n  if (arr.length <= 1) {\n    return arr;\n  }\n  return merge(\n    sorted(arr.slice(0, Math.floor(arr.length / 2)), comp),\n    sorted(arr.slice(Math.floor(arr.length / 2)), comp),\n    comp\n  );\n};\n\nexport { sorted };\n"],"names":["Rating","_ref","rating","number","needNumber","getStar","_jsx","src","process","alt","_jsxs","className","children","concat","defaultProps","React","review","author","title","pros","cons","description","sorts","featured","a","b","byDate","date","aDate","Date","bDate","getTime","ascending","descending","goods","params","useParams","useState","filters","setFilters","sorting","setSorting","product","productId","to","handleArrayInput","e","name","JSON","parse","stringify","filtersCopy","hasOwnProperty","includes","target","value","filter","el","Object","keys","reviews","length","id","onChange","type","sorted","entries","map","entry","obj","filterProp","pass","Array","toString","fitFilters","Review","merge","comp","arr","i","j","push","slice","Math","floor"],"sourceRoot":""}